def runShellBuildStage(){
    sh 'python -m venv .venv' 
    sh 'source .venv/bin/activate'
    sh 'pip install pyhamcrest'
}
def runtests(){
    sh 'python -m unittest test_with_unittest.py'
}
pipeline {
    agent any 
    stages {
        stage('Build') { 
            steps {
                runShellBuildStage()
            }
        }
        stage('Test'){
            steps {
                runtests()
            }
        }
    }
}